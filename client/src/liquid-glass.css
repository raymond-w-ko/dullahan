/**
 * Liquid Glass Effect
 *
 * Theme-adaptive glassmorphism that works on both light and dark themes.
 * Uses CSS variables from the theme system for automatic adaptation.
 *
 * References:
 * - https://css-tricks.com/getting-clarity-on-apples-liquid-glass/
 * - https://ui.glass/generator/
 * - https://medium.com/@developer_89726/dark-glassmorphism-the-aesthetic-that-will-define-ui-in-2026
 */

/* ==========================================================================
   Glass Container

   A utility class for glassmorphism effect. Does NOT set dimensions -
   those should come from the component using this class.
   ========================================================================== */

.glassContainer {
  position: relative;

  /* Semi-transparent background using theme colors
     Uses selection-bg which themes define appropriately for light/dark */
  background: color-mix(in srgb, var(--term-selection-bg) 40%, transparent);

  /* Fallback for browsers without color-mix */
  @supports not (background: color-mix(in srgb, red 50%, blue)) {
    background: rgba(128, 128, 128, 0.2);
  }

  /* The core glass effect */
  backdrop-filter: blur(12px) saturate(150%);
  -webkit-backdrop-filter: blur(12px) saturate(150%);

  /* Subtle border using bright-black from palette */
  border: 1px solid color-mix(in srgb, var(--c8) 30%, transparent);
  border-radius: 8px;

  /* Depth shadow - dark for all themes */
  box-shadow:
    0 8px 32px rgba(0, 0, 0, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);

  /* Ensure content is above any pseudo-elements */
  isolation: isolate;
}

/* Fallback border for browsers without color-mix */
@supports not (border-color: color-mix(in srgb, red 50%, blue)) {
  .glassContainer {
    border-color: rgba(128, 128, 128, 0.3);
  }
}

/* ==========================================================================
   Glass Button

   Circular glass button with hover effects.
   ========================================================================== */

.glassBtn {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  padding: 12px;
  background: color-mix(in srgb, var(--term-selection-bg) 30%, transparent);
  border-radius: 9999px;
  outline: none;
  border: 1px solid color-mix(in srgb, var(--c8) 25%, transparent);

  backdrop-filter: blur(8px) saturate(140%);
  -webkit-backdrop-filter: blur(8px) saturate(140%);

  box-shadow:
    0 4px 16px rgba(0, 0, 0, 0.2),
    inset 0 1px 0 rgba(255, 255, 255, 0.08);

  transition: all 0.2s ease;
  color: var(--term-fg);
}

.glassBtn:hover {
  background: color-mix(in srgb, var(--term-selection-bg) 50%, transparent);
  box-shadow:
    0 6px 24px rgba(0, 0, 0, 0.25),
    inset 0 1px 0 rgba(255, 255, 255, 0.12);
}

.glassBtn:active {
  transform: scale(0.97);
}

.glassBtn svg {
  width: 100%;
  height: 100%;
  stroke: currentColor;
}

/* Fallback for browsers without color-mix */
@supports not (background: color-mix(in srgb, red 50%, blue)) {
  .glassBtn {
    background: rgba(128, 128, 128, 0.15);
    border-color: rgba(128, 128, 128, 0.25);
  }
  .glassBtn:hover {
    background: rgba(128, 128, 128, 0.25);
  }
}

/* ==========================================================================
   Glass Panel Variant

   Lighter glass effect for inline panels (not modals).
   ========================================================================== */

.glassPanel {
  background: color-mix(in srgb, var(--term-bg) 80%, transparent);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid color-mix(in srgb, var(--c8) 20%, transparent);
  border-radius: 6px;
}

/* ==========================================================================
   Firefox Fallback

   Firefox has backdrop-filter disabled by default. Provide solid fallback.
   ========================================================================== */

@supports not (backdrop-filter: blur(1px)) {
  .glassContainer,
  .glassBtn,
  .glassPanel {
    /* More opaque background when blur isn't available */
    background: color-mix(in srgb, var(--term-bg) 95%, var(--term-fg) 5%);
  }
}

@-moz-document url-prefix() {
  .glassContainer,
  .glassBtn,
  .glassPanel {
    background: color-mix(in srgb, var(--term-bg) 95%, var(--term-fg) 5%);
  }
}
